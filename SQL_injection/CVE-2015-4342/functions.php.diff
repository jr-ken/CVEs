--- before/functions.php	2020-11-02 23:34:53.355981719 -0800
+++ after/functions.php	2020-11-02 23:34:53.355981719 -0800
@@ -1988,6 +1988,9 @@
    @arg $sub_type (optional) return the hash for a particlar sub-type of this type
    @returns - a 128-bit, hexadecimal hash */
 function get_hash_cdef($cdef_id, $sub_type = "cdef") {
+	if (! is_numeric($cdef_id)) {
+		$cdef_id = -1;
+	}
 	if ($sub_type == "cdef") {
 		$hash = db_fetch_cell("select hash from cdef where id=$cdef_id");
 	}elseif ($sub_type == "cdef_item") {
